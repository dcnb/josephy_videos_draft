<script type="text/javascript" language="javascript" src="{{ '/datatables/datatables.min.js' | prepend: site.digital-assets }}"></script>
<script>
/* use jquery to initialize DataTables and load collection data */
(function(){
    $('#item-table').DataTable( {
        // use DataTables ajax load 
        ajax: { url: '{{ "/data/metadata_min.json" | relative_url }}', dataSrc: 'objects' },
        // defer render to speed up large sets
        "deferRender": true,
        // get the data from the metadata.json
        columns: [ { data: '0' }, { data: '1' }, { data: '3' }, { data: '2' }, { data: '4' } ],
        columnDefs: [ 
            // combine link and title for first column
            { "render": function ( data, type, row ) { return '<a href="' + row['4'] +'">'+ data +'</a>'; },"targets": 0 },
            // join the subjects array to print nicely
            { "render": function ( data, type, row ) { return data.join("; "); },"targets": 3 },
            // hide the link column
            { "visible": false,  "targets": [ 4 ] }
        ],
        "paging": true,
        "lengthMenu": [[ 25, 50, 100, -1], [ 25, 50, 100, "All"]],
        // sort based on the date
        order: [[ 1, "desc" ]],
        // add download features
        dom: 'Blfrtip', 
        buttons: [ 'excelHtml5', 'csvHtml5' ]
    });
})();
</script>
